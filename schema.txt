CREATE TABLE DEPARTMENT(
DNO INTEGER NOT NULL,
MNGR_SSN INTEGER(9),
DNAME VARCHAR(10) NOT NULL,
PRIMARY KEY(DNO),
UNIQUE(DNAME),
FOREIGN KEY(MNGR_SSN) REFERENCES EMPLOYEE(SSN)
ON DELETE SET NULL
ON UPDATE CASCADE);

CREATE TABLE EMPLOYEE(
SSN INTEGER NOT NULL,
FNAME VARCHAR(30) NOT NULL,
MID_NAME VARCHAR(30) NULL,
LNAME VARCHAR(30) NOT NULL,
BDATE DATE,
DNO INTEGER DEFAULT 1,
SUPERSSN INTEGER(9),
PRIMARY KEY(SSN));

CREATE TABLE ADVERTISERS(
ID INTEGER NOT NULL,
AD_COMPANY VARCHAR(15) NOT NULL,
REP_NAME VARCHAR(30) NOT NULL,
REP_EMAIL VARCHAR(30) NOT NULL,
REP_PHONE_NO INTEGER(11) NOT NULL,
PRIMARY KEY(ID, AD_COMPANY),
UNIQUE(AD_COMPANY));

CREATE TABLE MOVIE(
ID INTEGER NOT NULL,
TITLE VARCHAR(30) NOT NULL,
RELEASE_DATE DATE,
LENGTH TIME NOT NULL,
EARNINGS REAL,
AIR_LENGTH TIME,
POSTER_PATH VARCHAR(50));

CREATE TABLE CUSTOMERS(
ID INTEGER NOT NULL,
FNAME VARCHAR(20) NOT NULL DEFAULT 'guest',
MID_NAME VARCHAR(20),
LNAME VARCHAR(20),
BDATE DATE,
SEX VARCHAR(6) DEFAULT 'female',
ADDRESS VARCHAR(50),
CREDIT_CARD_NO BIGINT(16),
EMAIL VARCHAR(20),
PHONE_NO BIGINT(11),
PRIMARY KEY(ID),
UNIQUE(ID));

CREATE TABLE AUDITORIUM(
AUD_NO INTEGER NOT NULL,
SEAT_COUNT INTEGER NOT NULL,
LOCATION VARCHAR(15),
PRIMARY KEY(AUD_NO),
SHOWING_ID INTEGER,
FOREIGN KEY(SHOWING_ID) REFERENCES SHOWING(ID)
ON DELETE SET NULL
ON UPDATE CASCADE);

CREATE TABLE SHOWING(
ID INTEGER NOT NULL,
START_TIME TIME,
PRICE REAL,
MOVIE_ID INTEGER,
PRIMARY KEY(ID),
FOREIGN KEY(MOVIE_ID) REFERENCES MOVIE(ID)
ON DELETE SET NULL
ON UPDATE CASCADE);

CREATE TABLE TICKET(
ID INTEGER NOT NULL,
SHOWING_ID INTEGER,
SEAT_NO INTEGER,
PRIMARY KEY(ID),
FOREIGN KEY(SHOWING_ID) REFERENCES SHOWING(ID)
ON DELETE SET NULL,
ON UPDATE CASCADE);

CREATE TABLE REVIEW(
ID INTEGER NOT NULL,
MOVIE_ID INTEGER,
COMMENTS VARCHAR(140),
RATING REAL(5),
PRIMARY KEY(ID),
FOREIGN KEY(MOVIE_ID) REFERENCES MOVIE(ID)
ON DELETE SET NULL
ON UPDATE CASCADE);